//
//  main.swift
//  æ‰©å±•ï¼ˆExtensionsï¼‰
//
//  Created by Edwin on 16/3/6.
//  Copyright Â© 2016å¹´ EdwinXiang. All rights reserved.
//

import Foundation
/************************* æ‰©å±•ï¼ˆExtensionsï¼‰***************************/
/**
æ‰©å±•è¯­æ³•
è®¡ç®—å‹å±æ€§
æ„é€ å™¨
æ–¹æ³•
ä¸‹æ ‡
åµŒå¥—ç±»å‹
æ‰©å±• å°±æ˜¯ä¸ºä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æ„ä½“ã€æšä¸¾ç±»å‹æˆ–è€…åè®®ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ã€‚è¿™åŒ…æ‹¬åœ¨æ²¡æœ‰æƒé™è·å–åŸå§‹æºä»£ç çš„æƒ…å†µä¸‹æ‰©å±•ç±»å‹çš„èƒ½åŠ›ï¼ˆå³ é€†å‘å»ºæ¨¡ ï¼‰ã€‚æ‰©å±•å’Œ Objective-C ä¸­çš„åˆ†ç±»ç±»ä¼¼ã€‚ï¼ˆä¸ Objective-C ä¸åŒçš„æ˜¯ï¼ŒSwift çš„æ‰©å±•æ²¡æœ‰åå­—ã€‚ï¼‰

Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š

æ·»åŠ è®¡ç®—å‹å±æ€§å’Œè®¡ç®—å‹ç±»å‹å±æ€§
å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•
æä¾›æ–°çš„æ„é€ å™¨
å®šä¹‰ä¸‹æ ‡
å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»å‹
ä½¿ä¸€ä¸ªå·²æœ‰ç±»å‹ç¬¦åˆæŸä¸ªåè®®
åœ¨ Swift ä¸­ï¼Œä½ ç”šè‡³å¯ä»¥å¯¹åè®®è¿›è¡Œæ‰©å±•ï¼Œæä¾›åè®®è¦æ±‚çš„å®ç°ï¼Œæˆ–è€…æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œä»è€Œå¯ä»¥è®©ç¬¦åˆåè®®çš„ç±»å‹æ‹¥æœ‰è¿™äº›åŠŸèƒ½ã€‚ä½ å¯ä»¥ä»åè®®æ‰©å±•è·å–æ›´å¤šçš„ç»†èŠ‚ã€‚
*/
//æ³¨æ„ğŸ·ï¼šæ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚

/**
æ‰©å±•è¯­æ³•ï¼ˆExtension Syntaxï¼‰
ä½¿ç”¨å…³é”®å­— extension æ¥å£°æ˜æ‰©å±•ï¼š
extension SomeType {
// ä¸º SomeType æ·»åŠ çš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ
}

å¯ä»¥é€šè¿‡æ‰©å±•æ¥æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»å‹ï¼Œä½¿å…¶é‡‡çº³ä¸€ä¸ªæˆ–å¤šä¸ªåè®®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯ç±»è¿˜æ˜¯ç»“æ„ä½“ï¼Œåè®®åå­—çš„ä¹¦å†™æ–¹å¼å®Œå…¨ä¸€æ ·ï¼š
extension SomeType: SomeProtocol, AnotherProctocol {
// åè®®å®ç°å†™åˆ°è¿™é‡Œ
}
*/


/**
è®¡ç®—å‹å±æ€§ï¼ˆComputed Propertiesï¼‰
æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ è®¡ç®—å‹å®ä¾‹å±æ€§å’Œè®¡ç®—å‹ç±»å‹å±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­ä¸º Swift çš„å†…å»º Double ç±»å‹æ·»åŠ äº†äº”ä¸ªè®¡ç®—å‹å®ä¾‹å±æ€§ï¼Œä»è€Œæä¾›ä¸è·ç¦»å•ä½åä½œçš„åŸºæœ¬æ”¯æŒï¼š
*/
extension Double {
    //è¿™äº›å±æ€§æ˜¯åªè¯»çš„è®¡ç®—å‹å±æ€§ï¼Œä¸ºäº†æ›´ç®€æ´ï¼Œçœç•¥äº† get å…³é”®å­—ã€‚å®ƒä»¬çš„è¿”å›å€¼æ˜¯ Doubleï¼Œè€Œä¸”å¯ä»¥ç”¨äºæ‰€æœ‰æ¥å— Double å€¼çš„æ•°å­¦è®¡ç®—ä¸­ï¼š
    var km:Double{return self * 1_000}
    var m: Double{return self}
    var cm: Double { return self / 100.0 }
    var mm: Double { return self / 1_000.0 }
    var ft: Double { return self / 3.28084 }
}
let oneInch = 25.4.mm
print("one inch is \(oneInch) meters")
let threeFeet = 3.ft
print("three feet is \(threeFeet) meters")
let aMarathon = 42.km + 195.m
print("a marathon is \(aMarathon) meters long")
//æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—å‹å±æ€§ï¼Œä½†æ˜¯ä¸å¯ä»¥æ·»åŠ å­˜å‚¨å‹å±æ€§ï¼Œä¹Ÿä¸å¯ä»¥ä¸ºå·²æœ‰å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ã€‚


//æ„é€ å™¨ï¼ˆInitializersï¼‰
//æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°çš„æ„é€ å™¨ã€‚è¿™å¯ä»¥è®©ä½ æ‰©å±•å…¶å®ƒç±»å‹ï¼Œå°†ä½ è‡ªå·±çš„å®šåˆ¶ç±»å‹ä½œä¸ºå…¶æ„é€ å™¨å‚æ•°ï¼Œæˆ–è€…æä¾›è¯¥ç±»å‹çš„åŸå§‹å®ç°ä¸­æœªæä¾›çš„é¢å¤–åˆå§‹åŒ–é€‰é¡¹ã€‚
//æ‰©å±•èƒ½ä¸ºç±»æ·»åŠ æ–°çš„ä¾¿åˆ©æ„é€ å™¨ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½ä¸ºç±»æ·»åŠ æ–°çš„æŒ‡å®šæ„é€ å™¨æˆ–ææ„å™¨ã€‚æŒ‡å®šæ„é€ å™¨å’Œææ„å™¨å¿…é¡»æ€»æ˜¯ç”±åŸå§‹çš„ç±»å®ç°æ¥æä¾›
struct Size {
    var width = 0.0,height = 0.0
}

struct Point {
    var x = 0.0,y = 0.0
}
struct Rect {
    var origin = Point()
    var size = Size()
}
//å› ä¸ºç»“æ„ä½“ Rect æœªæä¾›å®šåˆ¶çš„æ„é€ å™¨ï¼Œå› æ­¤å®ƒä¼šè·å¾—ä¸€ä¸ªé€ä¸€æˆå‘˜æ„é€ å™¨ã€‚åˆå› ä¸ºå®ƒä¸ºæ‰€æœ‰å­˜å‚¨å‹å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå®ƒåˆä¼šè·å¾—ä¸€ä¸ªé»˜è®¤æ„é€ å™¨ã€‚è¯¦æƒ…è¯·å‚é˜…é»˜è®¤æ„é€ å™¨ã€‚è¿™äº›æ„é€ å™¨å¯ä»¥ç”¨äºæ„é€ æ–°çš„ Rect å®ä¾‹ï¼š
let defaultRect = Rect()
let memberwiseRect = Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0))

//ä½ å¯ä»¥æä¾›ä¸€ä¸ªé¢å¤–çš„æ¥å—æŒ‡å®šä¸­å¿ƒç‚¹å’Œå¤§å°çš„æ„é€ å™¨æ¥æ‰©å±• Rect ç»“æ„ä½“ï¼š
extension Rect {
    init(center:Point,size:Size) {
        let originX = center.x - (size.width / 2)
        let originY = center.y - (size.height / 2)
        self.init(origin: Point(x: originX, y: originY), size: size)
    }
}
let centerRect = Rect(center: Point(x: 4.0, y: 4.0), size: Size(width: 3.0, height: 3.0))


//æ–¹æ³•ï¼ˆMethodsï¼‰
//æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°çš„å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ã€‚ä¸‹é¢çš„ä¾‹å­ä¸º Int ç±»å‹æ·»åŠ äº†ä¸€ä¸ªåä¸º repetitions çš„å®ä¾‹æ–¹æ³•ï¼š
extension Int {
    func repetitions(task: () -> Void) {
        for _ in 0..<self {
            task()
        }
    }
}
print("----------------------------")
3.repetitions({
    print("hello word")
})

//å¯ä»¥ä½¿ç”¨å°¾éšé—­åŒ…è®©è°ƒç”¨æ›´åŠ ç®€æ´ï¼š
2.repetitions{print("good bye")}


//å¯å˜å®ä¾‹æ–¹æ³•ï¼ˆMutating Instance Methodsï¼‰
//é€šè¿‡æ‰©å±•æ·»åŠ çš„å®ä¾‹æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®æ”¹è¯¥å®ä¾‹æœ¬èº«ã€‚ç»“æ„ä½“å’Œæšä¸¾ç±»å‹ä¸­ä¿®æ”¹ self æˆ–å…¶å±æ€§çš„æ–¹æ³•å¿…é¡»å°†è¯¥å®ä¾‹æ–¹æ³•æ ‡æ³¨ä¸º mutatingï¼Œæ­£å¦‚æ¥è‡ªåŸå§‹å®ç°çš„å¯å˜æ–¹æ³•ä¸€æ ·ã€‚
extension Int {
    mutating func square() {
        self = self * self
    }
}
var someInt = 3
 someInt.square()
print(someInt) // 9


//ä¸‹æ ‡ï¼ˆSubscriptsï¼‰
//æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°ä¸‹æ ‡ã€‚è¿™ä¸ªä¾‹å­ä¸º Swift å†…å»ºç±»å‹ Int æ·»åŠ äº†ä¸€ä¸ªæ•´å‹ä¸‹æ ‡ã€‚è¯¥ä¸‹æ ‡ [n] è¿”å›åè¿›åˆ¶æ•°å­—ä»å³å‘å·¦æ•°çš„ç¬¬ n ä¸ªæ•°å­—ï¼š
extension Int {
    subscript (var digitIndex:Int) -> Int {
        var decimalBase = 1
        while digitIndex > 0 {
            decimalBase *= 10
            --digitIndex
        }
        return (self / decimalBase) % 10
    }
}
print(237923759387429[5])
//å¦‚æœè¯¥ Int å€¼æ²¡æœ‰è¶³å¤Ÿçš„ä½æ•°ï¼Œå³ä¸‹æ ‡è¶Šç•Œï¼Œé‚£ä¹ˆä¸Šè¿°ä¸‹æ ‡å®ç°ä¼šè¿”å› 0ï¼ŒçŠ¹å¦‚åœ¨æ•°å­—å·¦è¾¹è‡ªåŠ¨è¡¥ 0ï¼š
print(2342342[9])


//åµŒå¥—ç±»å‹ï¼ˆNested Typesï¼‰
//æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰çš„ç±»ã€ç»“æ„ä½“å’Œæšä¸¾æ·»åŠ æ–°çš„åµŒå¥—ç±»å‹ï¼š
// MARK: - è¯¥ä¾‹å­ä¸º Int æ·»åŠ äº†åµŒå¥—æšä¸¾ã€‚è¿™ä¸ªåä¸º Kind çš„æšä¸¾è¡¨ç¤ºç‰¹å®šæ•´æ•°çš„ç±»å‹ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¡¨ç¤ºæ•´æ•°æ˜¯æ­£æ•°ã€é›¶æˆ–è€…è´Ÿæ•°ã€‚
//è¿™ä¸ªä¾‹å­è¿˜ä¸º Int æ·»åŠ äº†ä¸€ä¸ªè®¡ç®—å‹å®ä¾‹å±æ€§ï¼Œå³ kindï¼Œç”¨æ¥æ ¹æ®æ•´æ•°è¿”å›é€‚å½“çš„ Kind æšä¸¾æˆå‘˜ã€‚
extension Int {
    enum Kind {
        case Negative,Zero,Positive
    }
    var kind:Kind {
        switch self {
        case 0:
            return .Zero
        case let x where x > 0:
            return .Positive
        default:
            return .Negative
        }
    }
}

func printIntegerKinds(numbers:[Int]) {
    for number in numbers {
        switch number.kind {
        case .Negative:
            print("-",terminator:" ")
        case .Zero:
            print("0",terminator:" ")
        case .Positive:
            print("+",terminator:" ")
        }
    }
    print("")
}
printIntegerKinds([3,56,34,-34,0,67,-54])
//å‡½æ•° printIntegerKinds(_:) æ¥å—ä¸€ä¸ª Int æ•°ç»„ï¼Œç„¶åå¯¹è¯¥æ•°ç»„è¿›è¡Œè¿­ä»£ã€‚åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå¯¹å½“å‰æ•´æ•°çš„è®¡ç®—å‹å±æ€§ kind çš„å€¼è¿›è¡Œè¯„ä¼°ï¼Œå¹¶æ‰“å°å‡ºé€‚å½“çš„æè¿°ã€‚
//ç”±äºå·²çŸ¥ number.kind æ˜¯ Int.Kind ç±»å‹ï¼Œå› æ­¤åœ¨ switch è¯­å¥ä¸­ï¼ŒInt.Kind ä¸­çš„æ‰€æœ‰æˆå‘˜å€¼éƒ½å¯ä»¥ä½¿ç”¨ç®€å†™å½¢å¼ï¼Œä¾‹å¦‚ä½¿ç”¨ . Negative è€Œä¸æ˜¯ Int.Kind.Negativeã€‚
